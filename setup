#!/bin/bash
sudo chmod +x main
sudo chmod +x halt
sudo chmod +x remove
./main
touch /home/$(whoami)/.startupinfocommand
cat <<EOF > /home/$(whoami)/.startupinfocommand
#!/bin/bash
function funcremove {
  cd $(sudo find /home -type d -name ".startupinfo" -print -quit)
  ./remove
}
function funchalt {
  cd $(sudo find /home -type d -name ".startupinfo" -print -quit)
  ./halt
}
function funcrun {
  cd $(sudo find /home -type d -name ".startupinfo" -print -quit)
  ./main
}
function funchelp {
  echo "Usage: .startupinfo [OPTIONS]"
  echo "Options:"
  echo "  -h, --help     Show this help message"
  echo "  -v, --version  Show the version"
  echo "  -r, --run      Run the script and show your info on startup"
  echo "  -a, --halt     Halt the script and prevent it from running on startup"
  echo "  -e, --remove   Remove this script and everything related to it"
}
while [[ "$#" -gt 0 ]]; do
    case $1 in
        -h|--help) funchelp; exit 0 ;;
        -v|--version) echo "v1.2"; exit 0 ;;
        -r|--run) funcrun; exit 0 ;;
        -a|--halt) funchalt; exit 0 ;;
        -e|--remove) funcremove; exit 0 ;;
        *) echo "Unknown option: $1" >&2; funchelp; exit 1 ;;
    esac
    shift
done
EOF
sudo cp /home/$(whoami)/.startupinfocommand /bin/startupinfo
sudo chmod +x /bin/startupinfo
sudo mv /home/$(whoami)/.startupinfocommand /usr/bin/startupinfo
sudo chmod +x /usr/bin/startupinfo
